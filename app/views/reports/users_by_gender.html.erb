<a href="/reportes"><button class="btn btn-primary">Volver Atras</button></a>
<div class="container">
<h1>Lista de reportes</h1>
  <div class="panel panel-primary">
    <div class="panel-heading"><div class="panel-title" style="padding-top:1px;padding-bottom:1px"><h3 style="margin-top:10px">Personas registradas por Género</h3></div></div>
      <div class="panel-body">
        <ul class="list-group">
            <li class="list-group-item">
              <div class="center-select">
                <!-- <input type="text" name="title" id='filtrar' style='width:40%'> -->
                <select id="carrera" onchange="cambioCarreras()">
                  <%@title_list.each do |x|%>
                    <option><%=x%></option>
                    <%end%>
                </select>
              </div>
            </li>
          <li class="list-group-item">
            <div >
              <div class="table-responsive">
                <div id="Todas las carreras" class="filtro">
                <table class="table table-striped table-bordered table-hover" >
                  <tr>
                    <th style="text-align: center;">&nbsp;Género&nbsp;</th>
                    <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
                  </tr>
                  <% @info_charts.each do |date|%>
                  <tr>
                    <td>&nbsp;<%=date[0]%>&nbsp;</td>
                    <td style="text-align: center;"><%= date[1]%></td>
                  </tr>
                  <%end%>
                </table>
              </div>
              <div id="Bachiller" style="display:none;" class="filtro">
              <table class="table table-striped table-bordered table-hover" style="text-align: center;">
                <tr>
                  <th style="text-align: center;">&nbsp;Género&nbsp;</th>
                  <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
                </tr>
                <%
                @educations=Education.where("title ~* ?", "Bachiller")
                @users=Array.new
                if @educations
                  @educations.each do |edu|
                    @users=[edu.user] +@users
                  end
                  if @users.size>1
                    @users=@users.uniq
                  end
                end
                %>
                <%@personal_by_gender=Hash.new%>
                <%@personal_by_gender[true]=0%>
                <%@personal_by_gender[false]=0%>
                <%@users.each do |user|%>
                  <%if user.personal_information.gender!=nil%>
                  <%@personal_by_gender[user.personal_information.gender]+=1%>
                  <%end%>
                  <%end%>

                <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
                <% @info_charts.each do |date|%>
                <tr>
                  <td>&nbsp;<%=date[0]%>&nbsp;</td>
                  <td ><%= date[1]%></td>
                </tr>
                <%end%>

              </table>
            </div>
              <div id="Antropología" style="display:none;"  class="filtro">
              <table class="table table-striped table-bordered table-hover" style="text-align: center;">
                <tr>
                  <th style="text-align: center;">&nbsp;Género&nbsp;</th>
                  <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
                </tr>
                <%
                @educations=Education.where("title ~* ?", "Antropolog")
                @users=Array.new
                if @educations
                  @educations.each do |edu|
                    @users=[edu.user] +@users
                  end
                  if @users.size>1
                    @users=@users.uniq
                  end
                end
                %>
                <%@personal_by_gender=Hash.new%>
                <%@personal_by_gender[true]=0%>
                <%@personal_by_gender[false]=0%>
                <%@users.each do |user|%>
                  <%user.personal_information.gender%>
                  <%@personal_by_gender[user.personal_information.gender]+=1%>
                  <%end%>

                <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
                <% @info_charts.each do |date|%>
                <tr>
                  <td>&nbsp;<%=date[0]%>&nbsp;</td>
                  <td ><%= date[1]%></td>
                </tr>
                <%end%>
              </table>
            </div>
            <div id="Comunicación Social" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
              <tr>
                <th style="text-align: center;">&nbsp;Género&nbsp;</th>
                <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
              </tr>
              <%
              @educations=Education.where("title ~* ?", "Comunica")
              @users=Array.new
              if @educations
                @educations.each do |edu|
                  @users=[edu.user] +@users
                end
                if @users.size>1
                  @users=@users.uniq
                end
              end
              %>
              <%@personal_by_gender=Hash.new%>
              <%@personal_by_gender[true]=0%>
              <%@personal_by_gender[false]=0%>
              <%@users.each do |user|%>

                <% if user.personal_information.gender!=nil%>
                <%@personal_by_gender[user.personal_information.gender]+=1%>
                <%end%>
                <%end%>
              <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
              <% @info_charts.each do |date|%>
              <tr>
                <td>&nbsp;<%=date[0]%>&nbsp;</td>
                <td ><%= date[1]%></td>
              </tr>
              <%end%>

            </table>
            </div>
            <div id="Derecho"style="display:none;"   class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Derecho") +Education.where("title ~* ?", "Abogad")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>
              <%end%>
            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>
            <div id="Filosofía y Letras"style="display:none;"   class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr><%
            @educations=Education.where("title ~* ?", "Filosofía")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>
              <%end%>
            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>  <div id="Psicología" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Psicolog")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>

              <%end%>
            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>  <div id="Ingeniería Ambiental" style="display:none;" class="filtro">

            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Ambiental")+Education.where("title ~* ?", "Ambiente")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>

              <%end%>
            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>  <div id="Ingeniería Civil" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Civil")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>

              <%end%>
            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>  <div id="Ingeniería Industrial" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Industria")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>
              <%end%>

            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>  <div id="Ingeniería Química" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Químic")+ Education.where("title ~* ?", "Quimic")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
                <%@personal_by_gender[user.personal_information.gender]+=1%>
            <%end%>
            <%end%>

            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>
            </table>
            </div> <div id="Ingeniería Mecatrónica" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Mecatrónic")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
                <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>
            <%end%>

            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
          </div> <div id="Ingeniería de Sistemas" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Sistemas")+Education.where("title ~* ?", "Informatica")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>
              <%end%>

            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>  <div id="Ingeniería de Telecomunicaciones" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Telecomunicaciones")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%if user.personal_information.gender!=nil%>
              <%end%>
              <%end%>

            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>  <div id="Administración de Empresas" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Administración de Empresas")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>
              <%end%>

            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>  <div id="Contaduría Pública" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Contaduría")+Education.where("title ~* ?", "Contador")+ Education.where("title ~* ?", "Auditor")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>
              <%end%>

            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>  <div id="Ingeniería Comercial" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Comercial")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>
              <%end%>

            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div> <div id="Ingeniería Financiera" style="display:none;" class="filtro">
            <table class="table table-striped table-bordered table-hover" style="text-align: center;">
            <tr>
              <th style="text-align: center;">&nbsp;Género&nbsp;</th>
              <th style="text-align: center;">&nbsp;Número de personas registradas&nbsp;</th>
            </tr>
            <%
            @educations=Education.where("title ~* ?", "Financier") +Education.where("title ~* ?", "Finanzas")
            @users=Array.new
            if @educations
              @educations.each do |edu|
                @users=[edu.user] +@users
              end
              if @users.size>1
                @users=@users.uniq
              end
            end
            %>
            <%@personal_by_gender=Hash.new%>
            <%@personal_by_gender[true]=0%>
            <%@personal_by_gender[false]=0%>
            <%@users.each do |user|%>
              <%if user.personal_information.gender!=nil%>
              <%@personal_by_gender[user.personal_information.gender]+=1%>
              <%end%>
              <%end%>

            <%@info_charts={"Hombres"=>@personal_by_gender[true],"Mujeres"=>@personal_by_gender[false]}%>
            <% @info_charts.each do |date|%>
            <tr>
              <td>&nbsp;<%=date[0]%>&nbsp;</td>
              <td ><%= date[1]%></td>
            </tr>
            <%end%>

            </table>
            </div>
              </div>
            </div>
              <button class="btn btn-default btn-sm pull-right" id="mostrarGenero" onclick="showGenero()" style="display:none;">Mostrar Gráfica Estadística</button>
              <button class="btn btn-default btn-sm pull-right" id="ocultarGenero" onclick="showGenero()">Ocultar Gráfica Estadística</button>
              <br><br>
            </li>
            <li class="list-group-item">
              <div id="by_gender" style="display:none">
                <%= pie_chart @info_charts,download:"grafica" %>
              </div>
            </li>
        </ul>
      </div>
    </div>
  </div>
  <script>
    function cambioCarreras(){
      var selected=document.getElementById("carrera").value;
      var filtros=document.getElementsByClassName("filtro");
      for (var i=0; i<filtros.length;i++)
      {
        filtros[i].style.display="none";
      }
      document.getElementById(selected).style.display="block";

    }
  </script>

<script>
var genero = document.getElementById("by_gender");
var botonOcultarG = document.getElementById("ocultarGenero");
var botonMostrarG = document.getElementById("mostrarGenero");
window.onload =function(){
  botonMostrarG.style.display="block";
  botonOcultarG.style.display="none";
  genero.style.display="none";
}
function showGenero() {
    if (genero.style.display === "none") {
        genero.style.display = "block";
        botonMostrarG.style.display="none";
        botonOcultarG.style.display="block";
    } else {
        genero.style.display = "none";
        botonMostrarG.style.display="block";
        botonOcultarG.style.display="none";
    }
}
</script>

<style>
.center-select > select  {
margin: 50px;
width: 400px;
padding: 5px 35px 5px 5px;
font-size: 16px;
border: 1px solid #ccc;
height: 34px;
-webkit-appearance: none;
-moz-appearance: none;
appearance: none;
}
  .center-select{
    padding-left:25%;
  left:30%;
  }
</style>
